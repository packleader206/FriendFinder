<!DOCTYPE html>
<html>
<head>
	<title>Friend Finder Survey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    
	<!-- My CSS -->
	<link rel="stylesheet" type="text/css" href="../css/style.css">
	
</head>
<body>
	<div class="container content">
		<h1 class="text-center">Friend Finder Survey</h1>
		<h2>Please fill out the form below, then select the responses that best describes how you feel about each of the statements. Our proprietary algorithm will return your best match based upon your answers.</h2>
        <br>
        <form>
			<div class="form-group">
				<input id="name" type="text" class="form-control" placeholder="Name (Required)">
			</div>
			<div class="form-group">
				<input id="photo" type="text" class="form-control" placeholder="Link to Profile Photo (Required)">
			</div>
			<div class="form-group">
                <label for="q1" id="questionGroup">I like dogs more than cats.</label>
				<select class="form-control" id="q1">
					<option value="empty"></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="q2" id="questionGroup">I'd rather drive than be the passenger.</label>
				<select class="form-control" id="q2">
					<option value="empty"></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="q3" id="questionGroup">I like Rock music better than Country music.</label>
				<select class="form-control" id="q3">
					<option value="empty"></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="q4" id="questionGroup">I like to watch sports.</label>
				<select class="form-control" id="q4">
					<option value="empty"></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="q5" id="questionGroup">I read as a hobby.</label>
				<select class="form-control" id="q5">
					<option value="empty"></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="q6" id="questionGroup">I exercise every day.</label>
				<select class="form-control" id="q6">
					<option value="empty"></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="q7" id="questionGroup">I like to cook.</label>
				<select class="form-control" id="q7">
					<option value="empty"></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="q8" id="questionGroup">I am socially liberal.</label>
				<select class="form-control" id="q8">
					<option value="empty"></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="q9" id="questionGroup">I like science fiction movies.</label>
				<select class="form-control" id="q9">
					<option value="empty"></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
			</div>
			<div class="form-group">
				<label for="q10" id="questionGroup">I like to ski or snowboard.</label>
				<select class="form-control" id="q10">
					<option value="empty"></option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
			</div>
		</form>
		<div class="text-center">
            <button id="submitBtn" type="submit" class="btn btn-success btn-lg">Submit</button>
        </div>
        <br>
		
		<!-- Modal Displays Best Friend match results after user completes survey -->
		<div id="bestFriendModal" class="modal fade" role="dialog">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<h3 class="modal-title">Your Best Match</h1>
					</div>
					<div class="modal-body">
						<h2 id="bestFriend"></h2>
						<img id="bestFriendPhoto" src="#">
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
    </div>
    <br>
    <footer>
            <div class="container">
                <a href="/api/friends">Discover Friends API</a>
                <span>|</span>
                <a href="https://github.com/packleader206/FriendFinder">GitHub Repo</a>
            </div>
    </footer>
    <br>
    <br>

    
    <!-- Bootstrap Javascript JQuery -->
	<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>
</html>

<script type="text/javascript">
    // On-click listener
	$("#submitBtn").on("click", function(event) {
		event.preventDefault();
        
        // Form validation - checks to see all required fields are entered
        // Variable sets the default to true
        var valid = true;
        
        // If name or photo field is not entered, valid set to false
		if($("#name").val() === "" || $("#photo").val() === "") {
            valid = false;
        // Else if any of the questions are not answered, valid set to false
		} else if($("#q1").val() === "empty" || $("#q2").val() === "empty" || $("#q3").val() === "empty" || $("#q4").val() === "empty" || $("#q5").val() === "empty" || $("#q6").val() === "empty" || $("#q7").val() === "empty" || $("#q8").val() === "empty" || $("#q9").val() === "empty" || $("#q10").val() === "empty") {
			valid = false;
        }
        // If user fills out all fields, valid is set to true and newuser variable created with user data
		if(valid === true) {
			var newUser = {
				name: $("#name").val().trim(),
				photo: $("#photo").val().trim(),
				scores: [
					$("#q1").val(),
					$("#q2").val(),
					$("#q3").val(),
					$("#q4").val(),
					$("#q5").val(),
					$("#q6").val(),
					$("#q7").val(),
					$("#q8").val(),
					$("#q9").val(),
					$("#q10").val()
				]
            };
            
            // Grab the URL of the website
            var currentURL = window.location.origin;
            
			// Ajax post data to the friends API
			$.post(currentURL + "/api/friends", newUser, function(data) {
                
                // Get result of best match and display name and photo
				$("#bestFriend").text(data.name);
                $("#bestFriendPhoto").attr("src", data.photo);
                
                // Show the modal with the best match
				$("#bestFriendModal").modal("toggle");
			});
		} else {
			// Alert shows if required field is missing
			alert("The survey is incomplete, please complete the survey to continue.");
		}
	});
</script>







